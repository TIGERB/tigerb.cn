<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--Description-->
    
        <meta name="description" content="Trying to be the person you want to be.">
    

    <!--Author-->
    
        <meta name="author" content="TIGERB">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="电商设计手册之基础商品信息"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="TIGERB"/>

    <!--Page Cover-->
    
        <meta property="og:image" content=""/>
    

    <!-- Title -->
    
    <title>电商设计手册之基础商品信息 - TIGERB</title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/sass/main.css">


    <!--[if lt IE 8]>
        
<script src="/js/ie/html5shiv.js"></script>

    <![endif]-->

    <!--[if lt IE 8]>
        
<link rel="stylesheet" href="/sass/ie8.css">

    <![endif]-->

    <!--[if lt IE 9]>
        
<link rel="stylesheet" href="/sass/ie9.css">

    <![endif]-->

    <!-- Gallery -->
    <link href="https://cdn.bootcss.com/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?30c7e7d53256334a8dc1cf524fcc77f6";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
    })();
    </script>

<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="TIGERB" type="application/atom+xml">
</head>

<body>

    <div id="wrapper">

        <!-- Menu -->
        <!-- Header -->
<header id="header">
    <div class="inner">

        <!-- Logo -->
        <a href="/" class="logo">
            <span class="symbol"><img src="http://blog-1251019962.cos.ap-beijing.myqcloud.com/qiniu_img_2022/20190707142019.png" alt="" /></span><span class="title">TIGERB</span>
        </a>

        <!-- Nav -->
        <nav>
            <ul>
                <li><a href="#menu">Menu</a></li>
            </ul>
        </nav>

    </div>
</header>

<!-- Menu -->
<nav id="menu">
    <h2>Menu</h2>
    <ul>
        
            <li>
                <a href="/">首页</a>
            </li>
        
            <li>
                <a target="_blank" rel="noopener" href="https://github.com/TIGERB">Github</a>
            </li>
        
            <li>
                <a target="_blank" rel="noopener" href="https://segmentfault.com/u/tigerb">Segmentfault</a>
            </li>
        
            <li>
                <a target="_blank" rel="noopener" href="https://juejin.im/user/5855e82d1b69e6006c9278b4">掘金</a>
            </li>
        
    </ul>
</nav>


        <div id="main">
            <div class="inner">

                <!-- Main Content -->
                

    <h1 class="title">电商设计手册之基础商品信息</h1>
    <div class="meta">
        2019-01-26
    </div>


    <span class="image main"><img src="No Code No Life" alt="" /></span>


<!-- Gallery -->


<!-- Content -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote>
<p>建议使用大屏设备(例如pad&#x2F;pc)，可以更好的浏览本篇文章</p>
</blockquote>
<p>今天我们开始「商品系统」的篇章。本文分为如下五大模块：</p>
<ul>
<li>需求分析</li>
<li>架构设计</li>
<li>Spu和Sku的故事</li>
<li>数据模型设计</li>
<li>接口设计</li>
</ul>
<p>第一篇我们主要看看一个入门的电商平台(<strong>B2C</strong>)如何去构建自己的<strong>基础商品信息</strong>，其实这个事情很简单，想想我们的现实生活，商家<strong>摆放</strong>商品到货架，客户从货架<strong>挑选</strong>商品，客户把挑选好的商品<strong>放入</strong>购物车(篮)，最后客户去收银台<strong>结账</strong>。</p>
<h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><p>对于一个电商平台来讲，我们怎么理解上面的简单示例呢？接着，我们来拆分上面这个简单的事情：</p>
<blockquote>
<p>商家<strong>摆放</strong>商品到货架，客户从货架<strong>挑选</strong>商品，客户把挑选好的商品<strong>放入</strong>购物车(篮)，最后客户去收银台<strong>结账</strong></p>
</blockquote>
<ol>
<li>商家是谁：电商平台</li>
<li>摆放是什么意思：上架</li>
<li>货架在哪：前台系统(web&#x2F;app&#x2F;…)</li>
<li>挑选：浏览前台系统</li>
<li>放入：点击前台系统「加入购物车按钮」</li>
<li>…(暂不多说了)</li>
</ol>
<p><strong>备注</strong>：本篇文章主要来看看1、2、3、4步该如何去设计。</p>
<p>通过上面的分析我们可以得出下面的信息：</p>
<ol>
<li>我们需要一个「电商平台」，电商平台里面需要有个<strong>商品后台系统</strong>。</li>
<li>我们上架什么东西呢？商品！所以<strong>商品后台系统</strong>需要具备<strong>创建</strong>和<strong>发布</strong>商品到<strong>前台系统</strong>的功能。</li>
<li>我们需要一个<strong>前台系统</strong>(比如网页)，前台系统具备商品列表和商品详情的页面，可供用户<strong>浏览</strong>。</li>
<li>前台系统的数据怎么来？所以我们需要一个<strong>接口网关</strong>(对外统一提供服务能力，企业总线)和<strong>商品服务</strong></li>
</ol>
<p>整理之后得到如下的需求点：</p>
<table>
<thead>
<tr>
<th>需求点</th>
<th>功能点</th>
<th>项目命名</th>
<th>技术栈</th>
</tr>
</thead>
<tbody><tr>
<td>商品后台系统</td>
<td>1.创建商品 2.发布商品到前台系统</td>
<td>Temporal Backend</td>
<td>PHP</td>
</tr>
<tr>
<td>前台系统</td>
<td>1.商品列表 2.商品详情</td>
<td>Skr Frontend</td>
<td>Vue</td>
</tr>
<tr>
<td>接口网关</td>
<td>企业总线</td>
<td>Skr Gateway</td>
<td>kong</td>
</tr>
<tr>
<td>商品服务</td>
<td>1.创建商品接口 2.商品状态变更接口 2.商品列表接口 3. 商品详情接口</td>
<td>Temporal Service</td>
<td>Golang</td>
</tr>
</tbody></table>
<h1 id="架构设计"><a href="#架构设计" class="headerlink" title="架构设计"></a>架构设计</h1><p>通过上面的需求分析，再加上之前的《电商设计手册之用户体系》中的用户体系和《支付开发，不得不了解的国内、国际第三方支付流程》中的支付服务，我们规划出以下的架构图。</p>
<a target="_blank" rel="noopener" href="http://blog-1251019962.cos.ap-beijing.myqcloud.com/qiniu_img_2022/skr-product-service.jpg" class="gallery-item"><img src="http://blog-1251019962.cos.ap-beijing.myqcloud.com/qiniu_img_2022/skr-product-service.jpg" style="width:100%;"></a>

<h1 id="Spu和Sku的故事"><a href="#Spu和Sku的故事" class="headerlink" title="Spu和Sku的故事"></a>Spu和Sku的故事</h1><p>对我们程序猿来讲「商品系统」刚开始的样子就是如下三点：</p>
<ol>
<li>创建商品功能：首先我们会有一张商品表，每创建一个商品我们会的到一个goods_id，如果商品存在父子的关系，加一个parent_id的字段就搞定了。</li>
<li>商品列表接口：商品表分页查询商品。</li>
<li>商品详情接口：商品表按goods_id索引查询商品信息。</li>
</ol>
<p>很简单是吧，基本一张表就搞定了，看起来也是没什么问题的。但是呢，程序设计的巧妙之处就在于<strong>抽象能力</strong>，电商行业把<code>goods_id</code>进行了进一步的抽象，产生了Spu和Sku概念，在了解Spu和Sku定义之前，我们还得了解下<strong>销售属性</strong>的含义，举个例子便于理解：</p>
<p>想想我们的现实生活，假如我们去批发市场上了一批AJ1球鞋，批发商会给我们不同<strong>配色</strong>、<strong>大小</strong>的AJ1球鞋。我们在店里销售这些商品时都会询问客户：“您是需要什么<strong>颜色</strong>和<strong>大小</strong>的AJ1球鞋呢？”。这里的<strong>颜色</strong>和<strong>大小</strong>就是所谓的<strong>销售属性</strong>，因为不同<strong>颜色</strong>和<strong>大小</strong>的AJ1球鞋可能价格不同、库存数量不同，现实生活中是不是如此，不同颜色或大小的AJ1都有差别巨大的价格。</p>
<p>接着，我们来看看Spu和Sku定义：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>概念</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>Spu</td>
<td>standard product unit 标准产品单位</td>
<td>goods_id剥离销售属性的部分，例如：小米8。商品列表我们展示Spu列表。</td>
</tr>
<tr>
<td>Sku</td>
<td>stock keeping unit 库存量单位</td>
<td>就是你想买的那个商品真正的编号，这个编号对应的库存就是你想买的那个商品的库存量。Spu+一或多个销售属性对应一个Sku，例如：小米8黑128G，其中黑和128G就是销售属性，小米8就是一个Spu。</td>
</tr>
</tbody></table>
<p>搞清楚了么？</p>
<h1 id="数据模型设计"><a href="#数据模型设计" class="headerlink" title="数据模型设计"></a>数据模型设计</h1><p>所以最后简单的<strong>商品表</strong>就拆成了<strong>spu表</strong>和<strong>sku表</strong>，接着我们还抽象出来了可复用的<strong>销售属性表</strong>和<strong>销售属性值表</strong>。除此之外<br>我们应该还有<strong>品牌表</strong>、<strong>类别表</strong>、简单的<strong>sku库存表</strong>(目前简单设计此表，后期具体业务重构此表)。接着我们列下这些表的明细：</p>
<table>
<thead>
<tr>
<th>表名称</th>
<th>表名</th>
</tr>
</thead>
<tbody><tr>
<td>品牌表</td>
<td>product_brands</td>
</tr>
<tr>
<td>类别表</td>
<td>product_category</td>
</tr>
<tr>
<td>spu表</td>
<td>product_spu</td>
</tr>
<tr>
<td>sku表</td>
<td>product_sku</td>
</tr>
<tr>
<td>销售属性表</td>
<td>product_attr</td>
</tr>
<tr>
<td>销售属性值</td>
<td>product_attr_value</td>
</tr>
<tr>
<td>sku库存表</td>
<td>product_sku_stock</td>
</tr>
</tbody></table>
<p>除了上面的表之外，我又加了另一张表 <code>关联关系冗余表 product_spu_sku_attr_map</code>，为什么呢？顾名思义，冗余用的，有了这张表，我们可以很高效的的到：</p>
<ol>
<li>spu下 有哪些sku</li>
<li>spu下 有那些销售属性 </li>
<li>spu下 每个销售属性对应的销售属性值(一对多) </li>
<li>spu下 每个销售属性值对应的sku(一对多)</li>
</ol>
<p>具体表结构如下所示：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">-- 品牌表 product_brands</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `product_brands` (</span><br><span class="line">    `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;品牌ID&#x27;</span>,</span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;品牌名称&#x27;</span>,</span><br><span class="line">    `<span class="keyword">desc</span>` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;品牌描述&#x27;</span>,</span><br><span class="line">    `logo_url` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;品牌logo图片&#x27;</span>,</span><br><span class="line">    `create_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `create_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建人staff_id&#x27;</span>,</span><br><span class="line">    `update_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `update_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;修改人staff_id&#x27;</span>,</span><br><span class="line">    `status` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 1:enable, 0:disable, -1:deleted&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;品牌表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 类别表 product_category</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `product_category` (</span><br><span class="line">    `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;分类ID&#x27;</span>,</span><br><span class="line">    `pid` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;父ID&#x27;</span>,</span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;分类名称&#x27;</span>,</span><br><span class="line">    `<span class="keyword">desc</span>` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;分类描述&#x27;</span>,</span><br><span class="line">    `pic_url` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;分类图片&#x27;</span>,</span><br><span class="line">    `path` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;分类地址&#123;pid&#125;-&#123;child_id&#125;-...&#x27;</span>,</span><br><span class="line">    `create_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `create_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建人staff_id&#x27;</span>,</span><br><span class="line">    `update_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `update_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;修改人staff_id&#x27;</span>,</span><br><span class="line">    `status` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 1:enable, 0:disable, -1:deleted&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;类别表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- spu表 product_spu</span></span><br><span class="line"><span class="comment">-- spu: standard product unit 标准产品单位</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `product_spu` (</span><br><span class="line">    `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;SPU ID&#x27;</span>,</span><br><span class="line">    `brand_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;品牌ID&#x27;</span>,</span><br><span class="line">    `category_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;分类ID&#x27;</span>,</span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;spu名称&#x27;</span>,</span><br><span class="line">    `<span class="keyword">desc</span>` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;spu描述&#x27;</span>,</span><br><span class="line">    `selling_point` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;卖点&#x27;</span>,</span><br><span class="line">    `unit` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;spu单位&#x27;</span>,</span><br><span class="line">    `banner_url` text COMMENT <span class="string">&#x27;banner图片 多个图片逗号分隔&#x27;</span>,</span><br><span class="line">    `main_url` text COMMENT <span class="string">&#x27;商品介绍主图 多个图片逗号分隔&#x27;</span>,</span><br><span class="line">    `price_fee` <span class="type">int</span> unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;售价，整数方式保存&#x27;</span>,</span><br><span class="line">    `price_scale` tinyint unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;售价，金额对应的小数位数&#x27;</span>,</span><br><span class="line">    `market_price_fee` <span class="type">int</span> unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;市场价，整数方式保存&#x27;</span>,</span><br><span class="line">    `market_price_scale` tinyint unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;市场价，金额对应的小数位数&#x27;</span>,</span><br><span class="line">    `create_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `create_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建人staff_id&#x27;</span>,</span><br><span class="line">    `update_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `update_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;修改人staff_id&#x27;</span>,</span><br><span class="line">    `status` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 1:enable, 0:disable, -1:deleted&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> AUTO_INCREMENT<span class="operator">=</span><span class="number">666666</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;spu表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- sku表 product_sku</span></span><br><span class="line"><span class="comment">-- sku: stock keeping unit 库存量单位</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `product_sku` (</span><br><span class="line">    `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;SKU ID&#x27;</span>,</span><br><span class="line">    `spu_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;SPU ID&#x27;</span>,</span><br><span class="line">    `attrs` text COMMENT <span class="string">&#x27;销售属性值&#123;attr_value_id&#125;-&#123;attr_value_id&#125; 多个销售属性值逗号分隔&#x27;</span>,</span><br><span class="line">    `banner_url` text COMMENT <span class="string">&#x27;banner图片 多个图片逗号分隔&#x27;</span>,</span><br><span class="line">    `main_url` text COMMENT <span class="string">&#x27;商品介绍主图 多个图片逗号分隔&#x27;</span>,</span><br><span class="line">    `price_fee` <span class="type">int</span> unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;售价，整数方式保存&#x27;</span>,</span><br><span class="line">    `price_scale` tinyint unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;售价，金额对应的小数位数&#x27;</span>,</span><br><span class="line">    `market_price_fee` <span class="type">int</span> unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;市场价，整数方式保存&#x27;</span>,</span><br><span class="line">    `market_price_scale` tinyint unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;市场价，金额对应的小数位数&#x27;</span>,</span><br><span class="line">    `create_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `create_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建人staff_id&#x27;</span>,</span><br><span class="line">    `update_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `update_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;修改人staff_id&#x27;</span>,</span><br><span class="line">    `status` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 1:enable, 0:disable, -1:deleted&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> AUTO_INCREMENT<span class="operator">=</span><span class="number">666666</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;sku表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 销售属性表 product_attr</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `product_attr` (</span><br><span class="line">    `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;销售属性ID&#x27;</span>,</span><br><span class="line">    `name` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;销售属性名称&#x27;</span>,</span><br><span class="line">    `<span class="keyword">desc</span>` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;销售属性描述&#x27;</span>,</span><br><span class="line">    `create_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `create_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建人staff_id&#x27;</span>,</span><br><span class="line">    `update_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `update_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;修改人staff_id&#x27;</span>,</span><br><span class="line">    `status` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 1:enable, 0:disable, -1:deleted&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;销售属性表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 销售属性值 product_attr_value</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `product_attr_value` (</span><br><span class="line">    `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;销售属性值ID&#x27;</span>,</span><br><span class="line">    `attr_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;销售属性ID&#x27;</span>,</span><br><span class="line">    `<span class="keyword">value</span>` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;销售属性值&#x27;</span>,</span><br><span class="line">    `<span class="keyword">desc</span>` <span class="type">varchar</span>(<span class="number">255</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;销售属性值描述&#x27;</span>,</span><br><span class="line">    `create_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `create_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建人staff_id&#x27;</span>,</span><br><span class="line">    `update_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `update_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;修改人staff_id&#x27;</span>,</span><br><span class="line">    `status` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 1:enable, 0:disable, -1:deleted&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;销售属性值&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 关联关系冗余表 product_spu_sku_attr_map</span></span><br><span class="line"><span class="comment">-- 1. spu下 有哪些sku</span></span><br><span class="line"><span class="comment">-- 2. spu下 有那些销售属性 </span></span><br><span class="line"><span class="comment">-- 3. spu下 每个销售属性对应的销售属性值(一对多) </span></span><br><span class="line"><span class="comment">-- 4. spu下 每个销售属性值对应的sku(一对多)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `product_spu_sku_attr_map` (</span><br><span class="line">    `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;自增ID&#x27;</span>,</span><br><span class="line">    `spu_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;SPU ID&#x27;</span>,</span><br><span class="line">    `sku_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;SKU ID&#x27;</span>,</span><br><span class="line">    `attr_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;销售属性ID&#x27;</span>,</span><br><span class="line">    `attr_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;销售属性名称&#x27;</span>,</span><br><span class="line">    `attr_value_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;销售属性值ID&#x27;</span>,</span><br><span class="line">    `attr_value_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;销售属性值&#x27;</span>,</span><br><span class="line">    `create_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `create_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建人staff_id&#x27;</span>,</span><br><span class="line">    `status` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 1:enable, 0:disable, -1:deleted&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;关联关系冗余表&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- sku库存表 product_sku_stock</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `product_sku_stock` (</span><br><span class="line">    `id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;自增ID&#x27;</span>,</span><br><span class="line">    `sku_id` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;SKU ID&#x27;</span>,</span><br><span class="line">    `quantity` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;库存&#x27;</span>,</span><br><span class="line">    `create_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">    `create_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;创建人staff_id&#x27;</span>,</span><br><span class="line">    `update_at` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;更新时间&#x27;</span>,</span><br><span class="line">    `update_by` <span class="type">int</span>(<span class="number">11</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;修改人staff_id&#x27;</span>,</span><br><span class="line">    `status` tinyint(<span class="number">1</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;状态 1:enable, 0:disable, -1:deleted&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;sku库存表&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="接口设计"><a href="#接口设计" class="headerlink" title="接口设计"></a>接口设计</h1><p>关于接口设计目前很简单，无非列表和详情。但是这里我做了一个很好的设计<strong>动静分离</strong>，例如库存的动态的数据，单独提供接口，其他列表和详情数据完全静态化，把流量打到CDN去，这里又会说到我们下步计划的基础服务体系里的「静态资源服务」，这个服务的主要功能就是把我们的接口数据静态化。具体的<strong>V1.0</strong>版的接口设计如下：</p>
<p>1、spu详情 GET {version}&#x2F;product&#x2F;spu&#x2F;{spu_id}</p>
<p>请求参数：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必传</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>spu_id</td>
<td>number</td>
<td>yes</td>
<td>spu ID</td>
</tr>
</tbody></table>
<p>响应内容：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;200&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;brand_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, 品牌ID&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 品牌名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 品牌描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;logo_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 品牌logo图片&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;category_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, 分类ID&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 品牌名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 品牌描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;pic_url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 分类图片&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 分类地址&#123;pid&#125;-&#123;child_id&#125;-...&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;spu_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, spu id&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, spu名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, spu描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;selling_point&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 卖点&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;unit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, spu单位&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;banner_url&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;string, banner 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;string, banner 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;main_url&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;string, 商品介绍主图 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;string, 商品介绍主图 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 售价&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;market_price&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 市场价&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;attrs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// 有那些销售属性</span></span><br><span class="line">                <span class="punctuation">&#123;</span> </span><br><span class="line">                    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;销售属性ID&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 销售属性名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 销售属性描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;values&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// 每个销售属性对应的销售属性值(一对多) </span></span><br><span class="line">                        <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;销售属性值ID&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 销售属性值&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 销售属性值描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="comment">// 每个销售属性值对应的sku(一对多) </span></span><br><span class="line">                            <span class="comment">// 页面初始化时，按钮不可点击逻辑判断： 如果该销售属性值下所有sku没有库存，则该销售属性按钮不可点击</span></span><br><span class="line">                            <span class="comment">// 选择销售属性值时，按钮不可点击逻辑判断：销售属性构成双向链表，每个销售属性又是一个单向链表存改销售属性对应的所有销售属性值。每当选择一个销售属性值时先前和后一个销售属性遍历，执销售属性值下所有sku售罄的按钮不可点击，且当前销售属性值map记录key为当前点击的销售属性值ID，值统一标示一下就行，目的记录是由于选择了哪个销售属性值使得当前的销售属性值为售罄状态</span></span><br><span class="line">                            <span class="comment">// 取消选择销售属性值时，按钮不可点击逻辑恢复判断：数据结构同上，遍历，记录的map删除key为当前取消选中的销售属性值，并判断是否还有别的key使得该销售属性值为售罄状态，如果没有则恢复未售罄状态</span></span><br><span class="line">                            <span class="attr">&quot;skus&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                                <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                                <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;skus&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// 有哪些sku</span></span><br><span class="line">                <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;skus_map&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;&#123;attr_value_id&#125;-&#123;attr_value_id&#125;-...&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;&#123;attr_value_id&#125;-&#123;attr_value_id&#125;-...&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;&#123;attr_value_id&#125;-&#123;attr_value_id&#125;-...&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;&#123;attr_value_id&#125;-&#123;attr_value_id&#125;-...&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;&#123;attr_value_id&#125;-&#123;attr_value_id&#125;-...&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;&#123;attr_value_id&#125;-&#123;attr_value_id&#125;-...&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>2、获取spu下所有skus库存 GET {version}&#x2F;stock&#x2F;spu&#x2F;{spu_id}</p>
<p>请求参数：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必传</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>spu_id</td>
<td>number</td>
<td>yes</td>
<td>spu ID</td>
</tr>
</tbody></table>
<p>响应内容：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;200&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;skus_stock&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;int, sku id&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;quantity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;int, 剩余库存数量&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>3、sku详情 GET {version}&#x2F;product&#x2F;sku&#x2F;{sku_id}</p>
<p>请求参数：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必传</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>sku</td>
<td>number</td>
<td>yes</td>
<td>sku ID</td>
</tr>
</tbody></table>
<p>响应内容：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;200&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, sku id&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, sku名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, sku描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;unit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, sku单位&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;banner_url&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;string, banner 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;string, banner 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;main_url&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;string, 商品介绍主图 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;string, 商品介绍主图 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 售价&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;market_price&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 市场价&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>4、spu列表 GET {version}&#x2F;product&#x2F;spu&#x2F;list</p>
<p>请求参数：</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>是否必传</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<p>响应内容：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;200&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;OK&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;number, spu id&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, spu名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, spu描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;unit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, spu单位&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;banner_url&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="string">&quot;string, banner 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="string">&quot;string, banner 图片url&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 售价&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;market_price&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string, 市场价&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>最后，如果有写的不对或者不完善的地方，希望大家多多评论，互相学习互相进步～</p>
<p>项目地址: <a target="_blank" rel="noopener" href="https://github.com/skr-shop/manuals">https://github.com/skr-shop/manuals</a></p>
<h1 id="下篇预告"><a href="#下篇预告" class="headerlink" title="下篇预告"></a>下篇预告</h1><p>下篇文章我们主要专注到基础商品信息的前端交互设计，比如Spu详情页面多销售属性的选择如何联动等，尽情期待。</p>
</div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script>

<!-- Tags -->



<div class="tags">
    <a href="/tags/shop/" class="button small">shop</a>
</div>



<!-- Qrcode -->
<div width="100px">
    <img src="http://cdn.tigerb.cn/wechat-blog-qrcode.jpg" alt="TIGERB" width="300px" style="display:block; margin: 30px auto 0px auto;">
</div>

<!-- Comments -->
<div>
    


</div>



            </div>
        </div>

        <!-- Footer -->
<footer id="footer">
    <div class="inner">
        <section>
            <h2>About</h2>
            <div>
                新一代轻量级「<a target="_blank" rel="noopener" href='http://easy-php.tigerb.cn'>EasyPHP</a>」框架作者，<a href="/php2go/#/">「《PHP到Go速转手册》」作者</a>，「<a target="_blank" rel="noopener" href='http://skrshop.tech/'>《电商设计手册 | SkrShop》</a>」作者，「<a href='http://tigerb.cn/go/#/patterns/'>《Go设计模式实战》系列</a>」作者，「<a href='http://tigerb.cn/go/#/kernal/'>《Go语言轻松进阶》系列</a>」作者。拥有丰富的电商系统开发经验，现于小米集团从事后端研发工作。<br><br><img style="vertical-align:middle" width="30%" src="http://blog-1251019962.cos.ap-beijing.myqcloud.com/qiniu_img_2022/wechat-blog-qrcode.jpg?imageMogr2/thumbnail/260x260!/format/webp/blur/1x0/quality/90|imageslim">
            </div>
        </section>
        <section>
            <h2>Follow</h2>
            <ul class="icons">
                
                    <li><a href="https://twitter.com/CODERCOOKER" class="icon style2 fa-twitter" target="_blank" ><span class="label">Twitter</span></a></li>
                
                
                
                
                
                    <li><a href="https://github.com/TIGERB" class="icon style2 fa-github" target="_blank" ><span class="label">GitHub</span></a></li>
                
                
                
                
                
                    <li><a href="mailto:tigerbcode@gmail.com" class="icon style2 fa-envelope-o" target="_blank" ><span class="label">Email</span></a></li>
                
                
                    <li><a href="\atom.xml" class="icon style2 fa-rss" target="_blank" ><span class="label">RSS</span></a></li>
                
            </ul>
        </section>
        <ul class="copyright">
            <li>&copy; TIGERB.cn All right reserved. 津ICP备17006784号-2</li>
            <li><a href="https://juejin.im/user/5855e82d1b69e6006c9278b4" target="_blank">juejin</a></li>
            <li><a href="https://segmentfault.com/u/tigerb" target="_blank">Segmentfault</a></li>
            <li><a target="_blank" rel="noopener" href="http://skrshop.tech/">电商设计手册 | SkrShop</a></li>
            <li><a href="http://tigerb.cn/go/#/patterns/">Go设计模式实战</a></li>
            <li><a href="http://tigerb.cn/go/#/kernal/">Go语言轻松进阶</a></li>
            <li><a target="_blank" rel="noopener" href="https://dayutalk.cn/">大愚Talk</a></li>
        </ul>
    </div>
</footer>
    </div>

    <!-- After footer scripts -->
    
<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- skel -->

<script src="/js/skel.min.js"></script>


<!-- Custom Code -->

<script src="/js/util.js"></script>


<!--[if lte IE 8]>

<script src="/js/ie/respond.min.js"></script>

<![endif]-->

<!-- Custom Code -->

<script src="/js/main.js"></script>


<!-- Gallery -->
<script src="https://cdn.bootcss.com/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->


</body>

</html>